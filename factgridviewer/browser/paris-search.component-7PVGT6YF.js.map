{
  "version": 3,
  "sources": ["src/app/paris-search/services/paris-database.service.ts", "src/app/paris-search/paris-search.component.ts", "src/app/paris-search/paris-search.component.html"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\r\nimport { Observable, BehaviorSubject } from \"rxjs\";\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ParisDatabaseService {\r\n\r\n  constructor() { }\r\n\r\n   // seed data\r\n    private seed = ['jaw', 'jar', 'toy', 'troy', 'hip', 'hop'];\r\n    private data$ = new BehaviorSubject(this.seed);\r\n\r\n    // expose Observable\r\n    data = this.data$.asObservable();\r\n\r\n  // this.data.subscribe(res =>console.log(res));\r\n\r\n    // enable adding, and emitting fresh dataset\r\n    addData(x: string) {\r\n        const newData = this.data$.getValue().concat(x);\r\n        this.data$.next(newData);\r\n    }\r\n\r\n}\r\n", "import { Component, OnInit, ChangeDetectorRef, inject } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Observable, BehaviorSubject, combineLatest} from 'rxjs';\r\nimport { map, switchMap, tap, debounceTime, takeWhile, filter } from 'rxjs/operators';\r\nimport { ParisDatabaseService } from './services/paris-database.service';\r\nimport { MatTableDataSource, MatTableModule } from '@angular/material/table';\r\nimport { FormControl, ReactiveFormsModule, FormsModule } from '@angular/forms';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatFormFieldModule} from '@angular/material/form-field';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport {MatButtonModule} from '@angular/material/button';\r\n//import { RouterLinkActive, RouterLink, RouterOutlet } from '@angular/router';\r\nimport { RouterModule } from '@angular/router';\r\nimport { SetLanguageService } from '../services/set-language.service';\r\nimport { RequestService } from '../services/request.service';\r\nimport { SelectedLangService } from '../selected-lang.service';\r\n\r\n\r\n\r\n\r\n\r\n@Component({\n    selector: 'app-paris-search',\n    imports: [\n        CommonModule,\n        RouterModule,\n        ReactiveFormsModule,\n        FormsModule,\n        MatInputModule,\n        MatFormFieldModule,\n        MatTableModule,\n        MatIconModule,\n        MatButtonModule,\n        MatCardModule,\n    ],\n    templateUrl: './paris-search.component.html',\n    styleUrls: ['./paris-search.component.scss']\n})\r\n\r\n\r\n\r\n\r\nexport class ParisSearchComponent implements OnInit {\r\n private dataService = inject(ParisDatabaseService);\r\n private changeDetector = inject(ChangeDetectorRef);\r\n private request = inject(RequestService);\r\n private setLanguage = inject(SetLanguageService);\r\n private lang = inject(SelectedLangService);\r\n\r\n\r\n  //  selectedLang: string = (localStorage['selectedLang']===undefined)? \"en\": localStorage['selectedLang']; //initialization of the storage of the selected language (english)\r\n\r\n\r\n    searchInput = new FormControl();\r\n\r\n    public selectedItem:Observable<any>;\r\n    public isDisplay:boolean = false;\r\n\r\n    data$ = new Observable<string[]>();\r\n    searchQuery$ = new BehaviorSubject<string>('');\r\n    \r\n    labels\r\n    items = [];\r\n    newItem;\r\n    itemId:string;\r\n\r\n    formerVisitsTitle:string =\"you have visited:\";\r\n    selectedParisItemsList:any[] = JSON.parse(localStorage.getItem('selectedItems'));\r\n\r\n\r\n    ngOnInit(): void {\r\n\r\n   /*\r\n    this.formerVisitsTitle = \"you have visited:\"\r\n    if(this.selectedLang === \"de\") {this.formerVisitsTitle = \"Sie haben besucht:\"};\r\n    if(this.selectedLang === \"fr\") {this.formerVisitsTitle = \"vous avez visitÃ© :\"};\r\n    if(this.selectedLang === \"es\") {this.formerVisitsTitle = \"has visitado :\"}\r\n    if(this.selectedLang === \"it\") {this.formerVisitsTitle = \"hai visitato :\"}\r\n    */\r\n\r\n    this.formerVisitsTitle = this.lang.formerVisitsTitle(this.formerVisitsTitle);\r\n\r\n    this.labels = this.searchInput.valueChanges   //search engine\r\n    .pipe(\r\n    debounceTime(400),\r\n    map( res => \"Paris, \" + res ),\r\n    tap(res => console.log(res)),\r\n    //switchMap(label => this.request.searchItem(label, this.selectedLang)),\r\n     switchMap(label => this.request.searchItem(label, this.lang.selectedLang, 50)),\r\n\r\n    map( res => this.createList(res)),\r\n    map(res => res == \"https://database.factgrid.de//w/api.php?action=wbgetentities&ids=&format=json&origin=*\"? \r\n   \"https://database.factgrid.de//w/api.php?action=wbgetentities&ids=Q220375&format=json&origin=*\" : res ),\r\n    debounceTime(200),\r\n    switchMap(url => this.request.getItem(url)),\r\n  //  takeWhile (res => res !== undefined),\r\n    filter (res => res !== undefined),\r\n    filter (res => res.entities !== undefined && res.entities !==null),\r\n   // filter (res => res.entities !== null),\r\n    map(res => Object.values(res.entities))\r\n   )\r\n    .subscribe(re => { \r\n  //  this.items = this.setLanguage.item(re, this.selectedLang);\r\n     this.items = this.setLanguage.item(re, this.lang.selectedLang);\r\n  //  this.items = this.filterResearchField(this.items, this.selectedResearchField);\r\n      this.isDisplay = true ;\r\n      if (this.items[0].id == \"Q220375\") { this.isDisplay = false };\r\n   this.changeDetector.detectChanges();\r\n      })\r\n    }\r\n\r\n   createList(re) {  //create an url whith the elements of an array\r\n    let list = \"\";\r\n     let url = \"\";\r\n    let baseGetURL = 'https://database.factgrid.de//w/api.php?action=wbgetentities&ids=';\r\n    let getUrlSuffix = '&format=json&origin=*';\r\n    let arr = re.search;\r\n    if ( arr === undefined ) { arr = []}\r\n    else { arr = arr };\r\n    for (let i = 0; i < arr.length; i++) {\r\n      list = list+\"|\"+arr[i].id;    \r\n    };\r\n    list = list.slice(1) ;\r\n    url = baseGetURL+list+getUrlSuffix;\r\n    return url\r\n    }\r\n\r\n  addParis(re) {\r\n     re = \"Paris, \"+re;\r\n    // return re\r\n   }\r\n\r\n    ngOnDestroy(): void {\r\n       this.labels.unsubscribe()\r\n       }\r\n   \r\n   }\r\n\r\n   \r\n\r\n \r\n\r\n\r\n\r\n\r\n", "<head>\r\n\r\n  <link href=\"https://fonts.googleapis.com/icon?family=Material+Icons\"\r\n        rel=\"stylesheet\">\r\n\r\n</head>\r\n\r\n<body>\r\n\r\n\r\n\r\n\r\n<div class=\"cardBackground\">\r\n     <div class=\"bigTitle\">Paris on FactGrid</div>\r\n</div>\r\n\r\n<mat-card  appearance=\"outlined\" class=mat-elevation-z12>\r\n  <mat-card-content>\r\n     <div class=\"search-center2\">\r\n        <mat-form-field>\r\n            <input matInput placeholder=\"Ex. rue de la Paix\" value=\"rue de la Paix\" [formControl]=\"searchInput\">\r\n        </mat-form-field>\r\n     </div>\r\n    </mat-card-content>\r\n\r\n    <div class=\"search-center\">\r\n           @if (isDisplay == true) {\r\n                  <div class=\"searchListSize\">\r\n                     <div class=\"details\">\r\n                      @for (item of items; track item) {\r\n                          <div>\r\n                            <span class=\"search-label\"> {{item.label}}</span>\r\n                            @if (item.description) {\r\n                            <span class=\"description-text\">, {{item.description }}</span>\r\n                            }\r\n                            <mat-icon-button class=\"internalLink\" [routerLink]=\"['/item',item.id]\"><mat-icon color=\"primary\" [inline]=\"true\">open_in_new</mat-icon></mat-icon-button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                \r\n                            <hr>\r\n                          </div>\r\n                          }\r\n                     </div>\r\n                   </div>\r\n              }\r\n\r\n           @if (isDisplay == false) {\r\n                <div>\r\n                  <div class=\"search-center\">\r\n                    <a href=\"https://database.factgrid.de/query/#%23model%0A%0ASELECT%20%3Fitem%20%3Fviewer%20%3FitemLabel%20%20WHERE%20%7B%0A%20%20SERVICE%20wikibase%3Alabel%20%7B%20bd%3AserviceParam%20wikibase%3Alanguage%20%22%5BAUTO_LANGUAGE%5D%2Cen%22.%20%7D%0A%20%20%3Fitem%20wdt%3AP2%20wd%3AQ7%3B%0A%20%20%20%20%20%20%20%20wdt%3AP247%20wd%3AQ24708.%0A%20%20BIND%28STRAFTER%28STR%28%3Fitem%29%2C%20STR%28wd%3A%29%29%20AS%20%3FitemId%29%0A%20%20BIND%28IRI%28CONCAT%28%22https%3A%2F%2Fdatabase.factgrid.de%2Fviewer%2Fitem%2F%22%2C%20%3FitemId%29%29%20AS%20%3Fviewer%29%0A%7D%0A\">\r\n                    sparql query</a>\r\n                     <span>&nbsp;&nbsp;|&nbsp;&nbsp;</span>            \r\n                    <a [routerLink]=\"['']\">FactGrid</a>  <!-- new route -->\r\n                  </div>           \r\n                   <div class=\"search-itemSelected\">\r\n                    <mat-card appearance=\"outlined\" class=\"search-itemSelected-mat-card\">\r\n                        <div class=\"selectedListTitle2\">{{formerVisitsTitle}}</div>\r\n                        <div class=\"selectedItemSize\">\r\n                            <hr>\r\n                            <mat-card-content>\r\n                             <div>\r\n                                @for (selectedItem of selectedParisItemsList; track selectedItem) {\r\n                                <div>    \r\n                                    @if (selectedItem) {\r\n                                    <span class=\"selectedItemText2\">\r\n                                        {{selectedItem.label}}&nbsp;\r\n                                        <mat-icon-button class=\"internalLink\" [routerLink]=\"['/item', selectedItem.value.id]\"><mat-icon class=\"whiteButton\" [inline]=\"true\">open_in_new</mat-icon></mat-icon-button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      \r\n                                    </span>\r\n                                    }\r\n                                    <br>\r\n                                </div>\r\n                                }\r\n                            </div>\r\n                            </mat-card-content>\r\n                        </div>\r\n                    </mat-card>\r\n                   </div>        \r\n                </div>\r\n            } \r\n      </div>\r\n </mat-card>\r\n\r\n</body>\r\n\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMM,IAAO,uBAAP,MAAO,sBAAoB;EAE/B,cAAA;AAGU,SAAA,OAAO,CAAC,OAAO,OAAO,OAAO,QAAQ,OAAO,KAAK;AACjD,SAAA,QAAQ,IAAI,gBAAgB,KAAK,IAAI;AAG7C,SAAA,OAAO,KAAK,MAAM,aAAY;EAPhB;;;EAYd,QAAQ,GAAS;AACb,UAAM,UAAU,KAAK,MAAM,SAAQ,EAAG,OAAO,CAAC;AAC9C,SAAK,MAAM,KAAK,OAAO;EAC3B;;;uCAjBS,uBAAoB;IAAA;EAAA;;4EAApB,uBAAoB,SAApB,sBAAoB,WAAA,YAFnB,OAAM,CAAA;EAAA;;;;;;;;AE6BQ,IAAA,yBAAA,GAAA,QAAA,EAAA;AAA+B,IAAA,iBAAA,CAAA;AAAuB,IAAA,uBAAA;;;;AAAvB,IAAA,oBAAA;AAAA,IAAA,6BAAA,MAAA,QAAA,aAAA,EAAA;;;;;AAHjC,IAAA,yBAAA,GAAA,KAAA,EAAK,GAAA,QAAA,CAAA;AACyB,IAAA,iBAAA,CAAA;AAAc,IAAA,uBAAA;AAC1C,IAAA,qBAAA,GAAA,kEAAA,GAAA,GAAA,QAAA,EAAA;AAGA,IAAA,yBAAA,GAAA,mBAAA,EAAA,EAAuE,GAAA,YAAA,EAAA;AAA0C,IAAA,iBAAA,GAAA,aAAA;AAAW,IAAA,uBAAA,EAAW;AAAkB,IAAA,iBAAA,GAAA,uBAAA;AACzJ,IAAA,oBAAA,GAAA,IAAA;AACF,IAAA,uBAAA;;;;AAN8B,IAAA,oBAAA,CAAA;AAAA,IAAA,6BAAA,KAAA,QAAA,OAAA,EAAA;AAC5B,IAAA,oBAAA;AAAA,IAAA,wBAAA,QAAA,cAAA,IAAA,EAAA;AAGsC,IAAA,oBAAA;AAAA,IAAA,qBAAA,cAAA,0BAAA,GAAA,KAAA,QAAA,EAAA,CAAA;AAA2D,IAAA,oBAAA;AAAA,IAAA,qBAAA,UAAA,IAAA;;;;;AAR3G,IAAA,yBAAA,GAAA,OAAA,CAAA,EAA4B,GAAA,OAAA,CAAA;AAExB,IAAA,2BAAA,GAAA,oDAAA,GAAA,GAAA,OAAA,MAAA,mCAAA;AAUD,IAAA,uBAAA,EAAM;;;;AAVL,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,OAAA,KAAA;;;;;AAgCc,IAAA,yBAAA,GAAA,QAAA,EAAA;AACI,IAAA,iBAAA,CAAA;AACA,IAAA,yBAAA,GAAA,mBAAA,EAAA,EAAsF,GAAA,YAAA,EAAA;AAA8C,IAAA,iBAAA,GAAA,aAAA;AAAW,IAAA,uBAAA,EAAW;AAAkB,IAAA,iBAAA,GAAA,uBAAA;AAChL,IAAA,uBAAA;;;;AAFI,IAAA,oBAAA;AAAA,IAAA,6BAAA,KAAA,gBAAA,OAAA,OAAA;AACsC,IAAA,oBAAA;AAAA,IAAA,qBAAA,cAAA,0BAAA,GAAA,KAAA,gBAAA,MAAA,EAAA,CAAA;AAA8E,IAAA,oBAAA;AAAA,IAAA,qBAAA,UAAA,IAAA;;;;;AAJ5H,IAAA,yBAAA,GAAA,KAAA;AACI,IAAA,qBAAA,GAAA,mEAAA,GAAA,GAAA,QAAA,EAAA;AAMA,IAAA,oBAAA,GAAA,IAAA;AACJ,IAAA,uBAAA;;;;AAPI,IAAA,oBAAA;AAAA,IAAA,wBAAA,kBAAA,IAAA,EAAA;;;;;AAhBpB,IAAA,yBAAA,GAAA,KAAA,EAAK,GAAA,OAAA,CAAA,EACwB,GAAA,KAAA,EAAA;AAEzB,IAAA,iBAAA,GAAA,eAAA;AAAY,IAAA,uBAAA;AACX,IAAA,yBAAA,GAAA,MAAA;AAAM,IAAA,iBAAA,GAAA,mBAAA;AAAyB,IAAA,uBAAA;AAChC,IAAA,yBAAA,GAAA,KAAA,EAAA;AAAuB,IAAA,iBAAA,GAAA,UAAA;AAAQ,IAAA,uBAAA,EAAI;AAEpC,IAAA,yBAAA,GAAA,OAAA,EAAA,EAAiC,GAAA,YAAA,EAAA,EACqC,IAAA,OAAA,EAAA;AACjC,IAAA,iBAAA,EAAA;AAAqB,IAAA,uBAAA;AACrD,IAAA,yBAAA,IAAA,OAAA,EAAA;AACI,IAAA,oBAAA,IAAA,IAAA;AACA,IAAA,yBAAA,IAAA,kBAAA,EAAkB,IAAA,KAAA;AAEd,IAAA,2BAAA,IAAA,qDAAA,GAAA,GAAA,OAAA,MAAA,mCAAA;AAWJ,IAAA,uBAAA,EAAM,EACa,EACjB,EACC,EACN;;;;AAxBF,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,cAAA,0BAAA,GAAA,GAAA,CAAA;AAIiC,IAAA,oBAAA,CAAA;AAAA,IAAA,4BAAA,OAAA,iBAAA;AAKxB,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,OAAA,sBAAA;;;ADf1B,IAAO,uBAAP,MAAO,sBAAoB;EArBjC,cAAA;AAsBS,SAAA,cAAc,OAAO,oBAAoB;AACzC,SAAA,iBAAiB,OAAO,iBAAiB;AACzC,SAAA,UAAU,OAAO,cAAc;AAC/B,SAAA,cAAc,OAAO,kBAAkB;AACvC,SAAA,OAAO,OAAO,mBAAmB;AAMtC,SAAA,cAAc,IAAI,YAAW;AAGtB,SAAA,YAAoB;AAE3B,SAAA,QAAQ,IAAI,WAAU;AACtB,SAAA,eAAe,IAAI,gBAAwB,EAAE;AAG7C,SAAA,QAAQ,CAAA;AAIR,SAAA,oBAA0B;AAC1B,SAAA,yBAA+B,KAAK,MAAM,aAAa,QAAQ,eAAe,CAAC;;EAG/E,WAAQ;AAUR,SAAK,oBAAoB,KAAK,KAAK,kBAAkB,KAAK,iBAAiB;AAE3E,SAAK,SAAS,KAAK,YAAY,aAC9B;MACD,aAAa,GAAG;MAChB,IAAK,SAAO,YAAY,GAAG;MAC3B,IAAI,SAAO,QAAQ,IAAI,GAAG,CAAC;;MAE1B,UAAU,WAAS,KAAK,QAAQ,WAAW,OAAO,KAAK,KAAK,cAAc,EAAE,CAAC;MAE9E,IAAK,SAAO,KAAK,WAAW,GAAG,CAAC;MAChC,IAAI,SAAO,OAAO,2FACnB,kGAAkG,GAAG;MACpG,aAAa,GAAG;MAChB,UAAU,SAAO,KAAK,QAAQ,QAAQ,GAAG,CAAC;;MAE1C,OAAQ,SAAO,QAAQ,MAAS;MAChC,OAAQ,SAAO,IAAI,aAAa,UAAa,IAAI,aAAY,IAAI;;MAEjE,IAAI,SAAO,OAAO,OAAO,IAAI,QAAQ,CAAC;IAAC,EAEtC,UAAU,QAAK;AAEf,WAAK,QAAQ,KAAK,YAAY,KAAK,IAAI,KAAK,KAAK,YAAY;AAE5D,WAAK,YAAY;AACjB,UAAI,KAAK,MAAM,CAAC,EAAE,MAAM,WAAW;AAAE,aAAK,YAAY;MAAM;AAAC;AAChE,WAAK,eAAe,cAAa;IAC9B,CAAC;EACH;EAED,WAAW,IAAE;AACZ,QAAI,OAAO;AACV,QAAI,MAAM;AACX,QAAI,aAAa;AACjB,QAAI,eAAe;AACnB,QAAI,MAAM,GAAG;AACb,QAAK,QAAQ,QAAY;AAAE,YAAM,CAAA;IAAE,OAC9B;AAAE,YAAM;IAAI;AAAC;AAClB,aAAS,IAAI,GAAG,IAAI,IAAI,QAAQ,KAAK;AACnC,aAAO,OAAK,MAAI,IAAI,CAAC,EAAE;IACzB;AAAC;AACD,WAAO,KAAK,MAAM,CAAC;AACnB,UAAM,aAAW,OAAK;AACtB,WAAO;EACP;EAEF,SAAS,IAAE;AACR,SAAK,YAAU;EAEjB;EAEC,cAAW;AACR,SAAK,OAAO,YAAW;EACvB;;;uCA5FM,uBAAoB;IAAA;EAAA;;yEAApB,uBAAoB,WAAA,CAAA,CAAA,kBAAA,CAAA,GAAA,OAAA,IAAA,MAAA,GAAA,QAAA,CAAA,CAAA,QAAA,+FAAA,OAAA,YAAA,GAAA,CAAA,GAAA,gBAAA,GAAA,CAAA,GAAA,UAAA,GAAA,CAAA,cAAA,YAAA,GAAA,mBAAA,GAAA,CAAA,GAAA,gBAAA,GAAA,CAAA,YAAA,IAAA,eAAA,sBAAA,SAAA,kBAAA,GAAA,aAAA,GAAA,CAAA,GAAA,eAAA,GAAA,CAAA,GAAA,gBAAA,GAAA,CAAA,GAAA,SAAA,GAAA,CAAA,GAAA,cAAA,GAAA,CAAA,GAAA,kBAAA,GAAA,CAAA,GAAA,gBAAA,GAAA,YAAA,GAAA,CAAA,SAAA,WAAA,GAAA,QAAA,GAAA,CAAA,QAAA,yiBAAA,GAAA,CAAA,GAAA,YAAA,GAAA,CAAA,GAAA,qBAAA,GAAA,CAAA,cAAA,YAAA,GAAA,8BAAA,GAAA,CAAA,GAAA,oBAAA,GAAA,CAAA,GAAA,kBAAA,GAAA,CAAA,GAAA,mBAAA,GAAA,CAAA,GAAA,eAAA,GAAA,QAAA,CAAA,GAAA,UAAA,SAAA,8BAAA,IAAA,KAAA;AAAA,UAAA,KAAA,GAAA;AC3CjC,QAAA,yBAAA,GAAA,MAAA;AAEE,QAAA,oBAAA,GAAA,QAAA,CAAA;AAGF,QAAA,uBAAA;AAEA,QAAA,yBAAA,GAAA,MAAA,EAAM,GAAA,OAAA,CAAA,EAKsB,GAAA,OAAA,CAAA;AACD,QAAA,iBAAA,GAAA,mBAAA;AAAiB,QAAA,uBAAA,EAAM;AAGlD,QAAA,yBAAA,GAAA,YAAA,CAAA,EAAyD,GAAA,kBAAA,EACrC,GAAA,OAAA,CAAA,EACa,GAAA,gBAAA;AAErB,QAAA,oBAAA,IAAA,SAAA,CAAA;AACJ,QAAA,uBAAA,EAAiB,EACd;AAGP,QAAA,yBAAA,IAAA,OAAA,CAAA;AACO,QAAA,qBAAA,IAAA,8CAAA,GAAA,GAAA,OAAA,CAAA,EAAyB,IAAA,8CAAA,IAAA,GAAA,KAAA;AAkD9B,QAAA,uBAAA,EAAM,EACA;;;AAzDwE,QAAA,oBAAA,EAAA;AAAA,QAAA,qBAAA,eAAA,IAAA,WAAA;AAMzE,QAAA,oBAAA,CAAA;AAAA,QAAA,wBAAA,IAAA,aAAA,OAAA,KAAA,EAAA;AAiBA,QAAA,oBAAA;AAAA,QAAA,wBAAA,IAAA,aAAA,QAAA,KAAA,EAAA;;;MDlBH;MACA;MAAY;MACZ;MAAmB;MAAA;MAAA;MACnB;MACA;MAAc;MAAA;MACd;MACA;MACA;MAAa;MACb;MACA;MAAa;MAAA;IAAA,GAAA,QAAA,CAAA,2xBAAA,EAAA,CAAA;EAAA;;;6EASR,sBAAoB,EAAA,WAAA,wBAAA,UAAA,kDAAA,YAAA,GAAA,CAAA;AAAA,GAAA;",
  "names": []
}
