import{a as te}from"./chunk-7VIZM36W.js";import{k as H}from"./chunk-4452UAQW.js";import{$b as V,$d as ie,Ad as G,Ba as l,Bd as Q,C as b,Dc as z,Ec as N,F as w,Ga as h,Ha as A,I as P,Ia as y,Ja as I,Jb as k,Ka as i,La as n,Lb as R,M as d,Ma as p,Pb as j,Pd as U,Sb as B,Td as J,Ub as $,Ud as W,Va as f,Vd as K,Wd as X,Xd as Y,Yd as Z,_d as ee,ac as q,ae as ne,db as o,eb as L,fb as C,h as F,j as v,ka as E,la as a,mb as D,nb as M,o as u,ra as T,v as S,vb as O,w as _,za as g}from"./chunk-SXRXJZQ7.js";var ae=(()=>{class t{constructor(){this.seed=["jaw","jar","toy","troy","hip","hop"],this.data$=new v(this.seed),this.data=this.data$.asObservable()}addData(e){let r=this.data$.getValue().concat(e);this.data$.next(r)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var re=t=>["/item",t],ce=()=>[""];function me(t,s){if(t&1&&(i(0,"span",10),o(1),n()),t&2){let e=f().$implicit;a(),C(", ",e.description,"")}}function de(t,s){if(t&1&&(i(0,"div")(1,"span",9),o(2),n(),g(3,me,2,1,"span",10),i(4,"mat-icon-button",11)(5,"mat-icon",12),o(6,"open_in_new"),n()(),o(7,"\xA0\xA0\xA0\xA0\xA0 "),p(8,"hr"),n()),t&2){let e=s.$implicit;a(2),C(" ",e.label,""),a(),h(e.description?3:-1),a(),l("routerLink",M(4,re,e.id)),a(),l("inline",!0)}}function pe(t,s){if(t&1&&(i(0,"div",7)(1,"div",8),y(2,de,9,6,"div",null,A),n()()),t&2){let e=f();a(2),I(e.items)}}function ue(t,s){if(t&1&&(i(0,"span",19),o(1),i(2,"mat-icon-button",11)(3,"mat-icon",20),o(4,"open_in_new"),n()(),o(5,"\xA0\xA0\xA0\xA0\xA0 "),n()),t&2){let e=f().$implicit;a(),C(" ",e.label,"\xA0 "),a(),l("routerLink",M(3,re,e.value.id)),a(),l("inline",!0)}}function he(t,s){if(t&1&&(i(0,"div"),g(1,ue,6,5,"span",19),p(2,"br"),n()),t&2){let e=s.$implicit;a(),h(e?1:-1)}}function fe(t,s){if(t&1&&(i(0,"div")(1,"div",6)(2,"a",13),o(3," sparql query"),n(),i(4,"span"),o(5,"\xA0\xA0|\xA0\xA0"),n(),i(6,"a",14),o(7,"FactGrid"),n()(),i(8,"div",15)(9,"mat-card",16)(10,"div",17),o(11),n(),i(12,"div",18),p(13,"hr"),i(14,"mat-card-content")(15,"div"),y(16,he,3,1,"div",null,A),n()()()()()()),t&2){let e=f();a(6),l("routerLink",D(2,ce)),a(5),L(e.formerVisitsTitle),a(5),I(e.selectedParisItemsList)}}var qe=(()=>{class t{constructor(){this.dataService=d(ae),this.changeDetector=d(O),this.request=d(ie),this.setLanguage=d(te),this.lang=d(ne),this.searchInput=new B,this.isDisplay=!1,this.data$=new F,this.searchQuery$=new v(""),this.items=[],this.formerVisitsTitle="you have visited:",this.selectedParisItemsList=JSON.parse(localStorage.getItem("selectedItems"))}ngOnInit(){this.formerVisitsTitle=this.lang.formerVisitsTitle(this.formerVisitsTitle),this.labels=this.searchInput.valueChanges.pipe(_(400),u(e=>"Paris, "+e),w(e=>console.log(e)),b(e=>this.request.searchItem(e,this.lang.selectedLang,50)),u(e=>this.createList(e)),u(e=>e=="https://database.factgrid.de//w/api.php?action=wbgetentities&ids=&format=json&origin=*"?"https://database.factgrid.de//w/api.php?action=wbgetentities&ids=Q220375&format=json&origin=*":e),_(200),b(e=>this.request.getItem(e)),S(e=>e!==void 0),S(e=>e.entities!==void 0&&e.entities!==null),u(e=>Object.values(e.entities))).subscribe(e=>{this.items=this.setLanguage.item(e,this.lang.selectedLang),this.isDisplay=!0,this.items[0].id=="Q220375"&&(this.isDisplay=!1),this.changeDetector.detectChanges()})}createList(e){let r="",c="",oe="https://database.factgrid.de//w/api.php?action=wbgetentities&ids=",se="&format=json&origin=*",m=e.search;m===void 0?m=[]:m=m;for(let x=0;x<m.length;x++)r=r+"|"+m[x].id;return r=r.slice(1),c=oe+r+se,c}addParis(e){e="Paris, "+e}ngOnDestroy(){this.labels.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=T({type:t,selectors:[["app-paris-search"]],decls:14,vars:3,consts:[["href",E`https://fonts.googleapis.com/icon?family=Material+Icons`,"rel","stylesheet"],[1,"cardBackground"],[1,"bigTitle"],["appearance","outlined",1,"mat-elevation-z12"],[1,"search-center2"],["matInput","","placeholder","Ex. rue de la Paix","value","rue de la Paix",3,"formControl"],[1,"search-center"],[1,"searchListSize"],[1,"details"],[1,"search-label"],[1,"description-text"],[1,"internalLink",3,"routerLink"],["color","primary",3,"inline"],["href","https://database.factgrid.de/query/#%23model%0A%0ASELECT%20%3Fitem%20%3Fviewer%20%3FitemLabel%20%20WHERE%20%7B%0A%20%20SERVICE%20wikibase%3Alabel%20%7B%20bd%3AserviceParam%20wikibase%3Alanguage%20%22%5BAUTO_LANGUAGE%5D%2Cen%22.%20%7D%0A%20%20%3Fitem%20wdt%3AP2%20wd%3AQ7%3B%0A%20%20%20%20%20%20%20%20wdt%3AP247%20wd%3AQ24708.%0A%20%20BIND%28STRAFTER%28STR%28%3Fitem%29%2C%20STR%28wd%3A%29%29%20AS%20%3FitemId%29%0A%20%20BIND%28IRI%28CONCAT%28%22https%3A%2F%2Fdatabase.factgrid.de%2Fviewer%2Fitem%2F%22%2C%20%3FitemId%29%29%20AS%20%3Fviewer%29%0A%7D%0A"],[3,"routerLink"],[1,"search-itemSelected"],["appearance","outlined",1,"search-itemSelected-mat-card"],[1,"selectedListTitle2"],[1,"selectedItemSize"],[1,"selectedItemText2"],[1,"whiteButton",3,"inline"]],template:function(r,c){r&1&&(i(0,"head"),p(1,"link",0),n(),i(2,"body")(3,"div",1)(4,"div",2),o(5,"Paris on FactGrid"),n()(),i(6,"mat-card",3)(7,"mat-card-content")(8,"div",4)(9,"mat-form-field"),p(10,"input",5),n()()(),i(11,"div",6),g(12,pe,4,0,"div",7)(13,fe,18,3,"div"),n()()()),r&2&&(a(10),l("formControl",c.searchInput),a(2),h(c.isDisplay==!0?12:-1),a(),h(c.isDisplay==!1?13:-1))},dependencies:[k,N,z,q,R,j,$,V,X,K,J,W,H,Q,G,U,ee,Y,Z],styles:[".example-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:300px}.example-header[_ngcontent-%COMP%]{min-height:64px;padding:8px 24px 0}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.mat-table[_ngcontent-%COMP%]{overflow:auto;max-height:500px}.search-center[_ngcontent-%COMP%]{display:flex;justify-content:center}.search-center2[_ngcontent-%COMP%]{margin-top:40px;display:flex;justify-content:center}.search-label[_ngcontent-%COMP%]{font-weight:700}.search-itemSelected[_ngcontent-%COMP%]{margin-top:50px}.selectedItemSize[_ngcontent-%COMP%]{font-size:14px}"]})}}return t})();export{qe as ParisSearchComponent};
