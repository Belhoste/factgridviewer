<body>
    <div class="FactGrid-div">
        <div class="FactGridTitle-div">
            <p>Advanced Search</p>
        </div>
    </div>
    
    <div fxLayoutAlign="center">
        <a [routerLink]="['/']">simple search</a>
        <span>|</span> 
        <a href="https://database.factgrid.de/query/#%23model%0A%0ASELECT%20%3Fitem%20%3Fviewer%20%3FitemLabel%20%20WHERE%20%7B%0A%20%20SERVICE%20wikibase%3Alabel%20%7B%20bd%3AserviceParam%20wikibase%3Alanguage%20%22%5BAUTO_LANGUAGE%5D%2Cen%22.%20%7D%0A%20%20%3Fitem%20wdt%3AP2%20wd%3AQ7%3B%0A%20%20%20%20%20%20%20%20wdt%3AP247%20wd%3AQ24708.%0A%20%20BIND%28STRAFTER%28STR%28%3Fitem%29%2C%20STR%28wd%3A%29%29%20AS%20%3FitemId%29%0A%20%20BIND%28IRI%28CONCAT%28%22https%3A%2F%2Fdatabase.factgrid.de%2Fviewer%2Fitem%2F%22%2C%20%3FitemId%29%29%20AS%20%3Fviewer%29%0A%7D%0A">sparql query</a>
    </div>   
    
    <div fxLayout="column" class="wrapper">
        <div fxLayoutAlign="center" class="details">
            <ng-select [items]="researchFields"
                        placeholder="select fields of research"
                        [virtualScroll]="true"
                        [multiple]="true"
                        [maxSelectedItems]="5"
                        [loading]="researchFieldsLoading"
                        autofocus
                        bindLabel="itemLabel.value"
                        bindValue="item.value"
                        appendTo="body"
                        (scroll)="onScroll($event)"
                        (scrollToEnd)="onScrollToEnd()"
                        (change)="getResearchFieldValues()"
                        [(ngModel)]="selectedResearchFields">
                    <ng-template ng-header-tmp>
                            <small class="form-text text-muted">Loaded {{researchFieldsBuffer.length}} of {{researchFields.length}}</small>
                    </ng-template>
            </ng-select>
        </div>
        <div fxLayoutAlign="center">
            <ng-select [items]="class"
                    placeholder="instances of"
                    autofocus
                    bindLabel="viewValue"
                    bindValue="value"
                    change="getClassValue()"
                    [(ngModel)]="selectedClassValue">
            </ng-select>
        </div>
    <div  class="details1"  *ngIf="selectedClassValue === 'Q7'">
        <div fxLayout="row wrap"
        fxLayout.lt-md="column"
         fxLayoutGap="30px grid" fxLayoutAlign="center center">
            <div class="details2">
                <ng-select [items]="familyNames"
                        placeholder="select family names (optional)"
                        [virtualScroll]="true"
                        [multiple]="true"
                        [maxSelectedItems]="5"
                        [loading]="familyNamesLoading"
                        autofocus
                        bindLabel="itemLabel.value"
                        bindValue="item.value"
                        appendTo="body"
                        (scroll)="onScroll($event)"
                        (scrollToEnd)="onScrollToEnd()"
                        (change)="getFamilyNameValues()"
                        [(ngModel)]="selectedFamilyNames">
                    <ng-template ng-header-tmp>
                            <small class="form-text text-muted">Loaded {{familyNamesBuffer.length}} of {{familyNames.length}}</small>
                    </ng-template>
                </ng-select>
            </div>
            <div class="details2"> 
                <ng-select [items]="givenNames"
                        placeholder="select given names (optional)"
                        [virtualScroll]="true"
                        [multiple]="true"
                        [maxSelectedItems]="5"
                        [loading]="givenNamesLoading"
                        autofocus
                        bindLabel="itemLabel.value"
                        bindValue="item.value"
                        appendTo="body"
                        (scroll)="onScroll($event)"
                        (scrollToEnd)="onScrollToEnd()"
                        (change)="getGivenNameValues()"
                        [(ngModel)]="selectedGivenNames">
                    <ng-template ng-header-tmp>
                        <small class="form-text text-muted">Loaded {{givenNamesBuffer.length}} of {{givenNames.length}}</small>
                    </ng-template>
                </ng-select>
            </div>
            <div class="details2">
                <ng-select [items]="locations"
                        placeholder="select birth places (optional)"
                        [virtualScroll]="true"
                        [multiple]="true"
                        [maxSelectedItems]="5"
                        [loading]="locationsLoading"
                        autofocus
                        bindLabel="itemLabel.value"
                        bindValue="item.value"
                        appendTo="body"
                        (scroll)="onScroll($event)"
                        (scrollToEnd)="onScrollToEnd()"
                        (change)="getBirthPlaceValues()"
                        [(ngModel)]="selectedBirthPlaces">
                    <ng-template ng-header-tmp>
                            <small class="form-text text-muted">Loaded {{locationsBuffer.length}} of {{locations.length}}</small>
                    </ng-template>
                </ng-select>
            </div>
            <div class="details2">
                <ng-select [items]="locations"
                        placeholder="select death places (optional)"
                        [virtualScroll]="true"
                        [multiple]="true"
                        [maxSelectedItems]="5"
                        [loading]="locationsLoading"
                        autofocus
                        bindLabel="itemLabel.value"
                        bindValue="item.value"
                        appendTo="body"
                        (scroll)="onScroll($event)"
                        (scrollToEnd)="onScrollToEnd()"
                        (change)="getDeathPlaceValues()"
                        [(ngModel)]="selectedDeathPlaces">
                    <ng-template ng-header-tmp>
                            <small class="form-text text-muted">Loaded {{locationsBuffer.length}} of {{locations.length}}</small>
                    </ng-template>
                </ng-select>
            </div>

            <div class="details2">
                <ng-select [items]="activities"
                        placeholder="select activities (optional)"
                        [virtualScroll]="true"
                        [multiple]="true"
                        [maxSelectedItems]="5"
                        [loading]="activitiesLoading"
                        bindLabel="itemLabel.value"
                        autofocus
                        bindValue="item.value"
                        appendTo="body"
                        (scroll)="onScroll($event)"
                        (scrollToEnd)="onScrollToEnd()"
                        (change)="getActivityValues()"
                        [(ngModel)]="selectedActivities">
                    <ng-template ng-header-tmp>
                        <small class="form-text text-muted">Loaded {{activitiesBuffer.length}} of {{activities.length}}</small>
                    </ng-template>
                </ng-select>
            </div>
            <div class="details2">
                <ng-select [items]="organisations"
                        placeholder="select contexts of activity (optional)"
                        [virtualScroll]="true"
                        [multiple]="true"
                        [maxSelectedItems]="5"
                        [loading]="organisationsLoading"
                        bindLabel="itemLabel.value"
                        autofocus
                        bindValue="item.value"
                        appendTo="body"
                        (scroll)="onScroll($event)"
                        (scrollToEnd)="onScrollToEnd()"
                        (change)="getActivityContextValues()"
                        [(ngModel)]="selectedActivityContexts">
                    <ng-template ng-header-tmp>
                        <small class="form-text text-muted">Loaded {{organisationsBuffer.length}} of {{organisations.length}}</small>
                    </ng-template>
                </ng-select>
            </div>  
            <div class="details2">
                <ng-select [items]="organisations"
                            placeholder="select members of (optional)"
                            [virtualScroll]="true"
                            [multiple]="true"
                            [maxSelectedItems]="5"
                            [loading]="organisationsLoading"
                            autofocus
                            bindLabel="itemLabel.value"
                            autofocus
                            bindValue="item.value"
                            appendTo="body"
                            (scroll)="onScroll($event)"
                            (scrollToEnd)="onScrollToEnd()"
                            (change)="getMemberOfValues()"
                            [(ngModel)]="selectedMembersOf">           
                    <ng-template ng-header-tmp>
                        <small class="form-text text-muted">Loaded {{organisationsBuffer.length}} of {{organisations.length}}</small>
                    </ng-template>
                </ng-select>
            </div>
        </div>
        <div fxLayoutAlign="center" class="details">Date Filters (optional)</div>
        <div>
        <div fxLayoutAlign="center" class="details2">Birth</div>
        <div fxLayout="row wrap"
        fxLayout.lt-md="column"
         fxLayoutGap="30px grid" fxLayoutAlign="center center">
            <div class="details">
            <div class="form-group"> 
                    From <input type="text" placeholder="yyyy-mm-dd" class="form-control" name="from" ngModel>
                    To <input type="text" placeholder="yyyy-mm-dd" class="form-control" name="from" ngModel> 
                    &nbsp;&nbsp;
                    <button type="submit" class="btn btn-primary">Submit</button>             
            </div>
            </div>
        </div>
    <div fxLayoutAlign="center" class="details2">Death</div>
    <div fxLayout="row wrap"
    fxLayout.lt-md="column"
     fxLayoutGap="30px grid" fxLayoutAlign="center center">
        <div class="form-group"> 
            From <input type="text" placeholder="yyyy-mm-dd" class="form-control" name="from" ngModel>
            To <input type="text" placeholder="yyyy-mm-dd" class="form-control" name="from" ngModel> 
            &nbsp;&nbsp;
            <button type="submit" class="btn btn-primary">Submit</button>  
        </div>
    </div>
    <div fxLayoutAlign="center" class="details2">Activity</div>
    <div fxLayout="row wrap"
    fxLayout.lt-md="column"
     fxLayoutGap="30px grid" fxLayoutAlign="center center">
        <div class="form-group"> 
            From <input type="text" placeholder="yyyy-mm-dd" class="form-control" name="from" ngModel>
            To <input type="text" placeholder="yyyy-mm-dd" class="form-control" name="from" ngModel> 
            &nbsp;&nbsp;
            <button type="submit" class="btn btn-primary">Submit</button>  
        </div>
    </div>
    <div fxLayoutAlign="center" class="details2">Membership</div>
    <div fxLayout="row wrap"
    fxLayout.lt-md="column"
     fxLayoutGap="30px grid" fxLayoutAlign="center center">
        <div class="form-group"> 
            From <input type="text" placeholder="yyyy-mm-dd" class="form-control" name="from" ngModel>
            To <input type="text" placeholder="yyyy-mm-dd" class="form-control" name="from" ngModel> 
            &nbsp;&nbsp;
            <button type="submit" class="btn btn-primary">Submit</button>  
        </div>
    </div>
    </div>

   
 <!----           <div fxLayoutAlign="center" class="details2">Birth</div>
                <div fxLayoutAlign="center" class="details">
                    <mat-form-field appearance="fill" class="example-form-field">
                <mat-label>From</mat-label>
                <input matInput [matDatepicker]="datepicker">
                <mat-datepicker-toggle matSuffix [for]="datepicker"></mat-datepicker-toggle>
                <mat-datepicker #datepicker>
                  <mat-datepicker-actions>
                    <button mat-button matDatepickerCancel>Cancel</button>
                    <button mat-raised-button color="primary" matDatepickerApply>Apply</button>
                  </mat-datepicker-actions>
                </mat-datepicker>
                </mat-form-field>&nbsp;&nbsp;
                <mat-form-field appearance="fill" class="example-form-field">
                <mat-label>To</mat-label>
                <input matInput [matDatepicker]="datepicker">
                <mat-datepicker-toggle matSuffix [for]="datepicker"></mat-datepicker-toggle>
                <mat-datepicker #datepicker>
                  <mat-datepicker-actions>
                    <button mat-button matDatepickerCancel>Cancel</button>
                    <button mat-raised-button color="primary" matDatepickerApply>Apply</button>
                  </mat-datepicker-actions>
                </mat-datepicker>
                </mat-form-field>             
            </div>

            <div fxLayoutAlign="center" class="details2">Death</div>
                <div fxLayoutAlign="center" class="details">
                    <mat-form-field appearance="fill" class="example-form-field">
                        <mat-label>From</mat-label>
                        <input matInput [matDatepicker]="datepicker">
                        <mat-datepicker-toggle matSuffix [for]="datepicker"></mat-datepicker-toggle>
                        <mat-datepicker #datepicker>
                            <mat-datepicker-actions>
                                <button mat-button matDatepickerCancel>Cancel</button>
                                <button mat-raised-button color="primary" matDatepickerApply>Apply</button>
                            </mat-datepicker-actions>
                        </mat-datepicker>
                    </mat-form-field>&nbsp;&nbsp;
                    <mat-form-field appearance="fill" class="example-form-field">
                        <mat-label>To</mat-label>
                        <input matInput [matDatepicker]="datepicker">
                        <mat-datepicker-toggle matSuffix [for]="datepicker"></mat-datepicker-toggle>
                        <mat-datepicker #datepicker>
                            <mat-datepicker-actions>
                                <button mat-button matDatepickerCancel>Cancel</button>
                                <button mat-raised-button color="primary" matDatepickerApply>Apply</button>
                            </mat-datepicker-actions>
                        </mat-datepicker>
                    </mat-form-field>
                </div>

            <div fxLayoutAlign="center" class="details2">Activity</div>
                <div fxLayoutAlign="center" class="details">
                    <mat-form-field appearance="fill" class="example-form-field">
                        <mat-label>From</mat-label>
                        <input matInput [matDatepicker]="datepicker">
                        <mat-datepicker-toggle matSuffix [for]="datepicker"></mat-datepicker-toggle>
                        <mat-datepicker #datepicker>
                            <mat-datepicker-actions>
                                <button mat-button matDatepickerCancel>Cancel</button>
                                <button mat-raised-button color="primary" matDatepickerApply>Apply</button>
                            </mat-datepicker-actions>
                        </mat-datepicker>
                    </mat-form-field>&nbsp;&nbsp;
                    <mat-form-field appearance="fill" class="example-form-field">
                        <mat-label>To</mat-label>
                        <input matInput [matDatepicker]="datepicker">
                        <mat-datepicker-toggle matSuffix [for]="datepicker"></mat-datepicker-toggle>
                        <mat-datepicker #datepicker>
                            <mat-datepicker-actions>
                                <button mat-button matDatepickerCancel>Cancel</button>
                                <button mat-raised-button color="primary" matDatepickerApply>Apply</button>
                            </mat-datepicker-actions>
                        </mat-datepicker>
                    </mat-form-field>
                </div>

            <div fxLayoutAlign="center" class="details2">Membership</div>
                <div fxLayoutAlign="center">
                    <mat-form-field appearance="fill" class="example-form-field">
                    <mat-label>From</mat-label>
                    <input matInput [matDatepicker]="datepicker">
                    <mat-datepicker-toggle matSuffix [for]="datepicker"></mat-datepicker-toggle>
                    <mat-datepicker #datepicker>
                        <mat-datepicker-actions>
                            <button mat-button matDatepickerCancel>Cancel</button>
                            <button mat-raised-button color="primary" matDatepickerApply>Apply</button>
                        </mat-datepicker-actions>
                    </mat-datepicker>
                    </mat-form-field>&nbsp;&nbsp;
                    <mat-form-field appearance="fill" class="example-form-field">
                    <mat-label>To</mat-label>
                    <input matInput [matDatepicker]="datepicker">
                    <mat-datepicker-toggle matSuffix [for]="datepicker"></mat-datepicker-toggle>
                    <mat-datepicker #datepicker>
                        <mat-datepicker-actions>
                            <button mat-button matDatepickerCancel>Cancel</button>
                            <button mat-raised-button color="primary" matDatepickerApply>Apply</button>
                        </mat-datepicker-actions>
                    </mat-datepicker>
                    </mat-form-field>
                </div>
--->

            <div fxLayoutAlign="center" *ngIf="selectedClassValue === 'Q7'">
                            {{selectedClassValues}}
                            {{selectedFamilyNames}}
                            {{selectedBirthPlaces}}
                            {{selectedDeathPlaces}}
                            {{selectedMembersOf}}
                </div> 
            </div>
        </div>
        
    
        
        <div *ngIf="selectedClassValue === 'Q8'"> 
            <div fxLayoutAlign="center" class="details">
                <ng-select [items]="locations"
                        placeholder="select places"
                        [virtualScroll]="true"
                        [multiple]="true"
                        [maxSelectedItems]="5"
                        [loading]="locationsLoading"
                        bindLabel="itemLabel.value"
                        autofocus
                        bindValue="item.value"
                        appendTo="body"
                        (scroll)="onScroll($event)"
                        (scrollToEnd)="onScrollToEnd()"
                        (change)="getLocationValues()"
                        [(ngModel)]="selectedLocations">
                    <ng-template ng-option-tmp let-item="item" let-index="index" let-search="searchTerm">
                        <span>{{item.itemLabel.value}}</span>|<span>{{item.itemDescription.value}}</span>
                    </ng-template>
                    <ng-template ng-header-tmp>
                    <small class="form-text text-muted">Loaded {{locationsBuffer.length}} of {{locations.length}}</small>
                    </ng-template>  
                </ng-select>
            </div>
        </div>
        <div *ngIf="selectedClassValue === 'Q12'">
            <div fxLayoutAlign="center" class="details"> 
                <ng-select [items]="organisations"
                            placeholder="select names"
                            [virtualScroll]="true"
                            [multiple]="true"
                            [maxSelectedItems]="5"
                            [loading]="organisationsLoading"
                            autofocus
                            bindLabel="itemLabel.value"
                            bindValue="item.value"
                            appendTo="body"
                            (scroll)="onScroll($event)"
                            (scrollToEnd)="onScrollToEnd()"
                            (change)="getOrgValues()"
                            [(ngModel)]="selectedOrgs">           
                    <ng-template ng-header-tmp>
                        <small class="form-text text-muted">Loaded {{organisationsBuffer.length}} of {{organisations.length}}</small>
                    </ng-template>
                </ng-select>
            </div>
            <div fxLayoutAlign="center" class="details">
                <ng-select [items]="locations"
                        placeholder="select places"
                        [virtualScroll]="true"
                        [multiple]="true"
                        [maxSelectedItems]="5"
                        [loading]="locationsLoading"
                        bindLabel="itemLabel.value"
                        autofocus
                        bindValue="item.value"
                        appendTo="body"
                        (scroll)="onScroll($event)"
                        (scrollToEnd)="onScrollToEnd()"
                        (change)="getOrgPlaceValues()"
                        [(ngModel)]="selectedOrgPlaces">
                    <ng-template ng-option-tmp let-item="item" let-index="index" let-search="searchTerm">
                        <span>{{item.itemLabel.value}}</span>|<span>{{item.itemDescription.value}}</span>
                    </ng-template>
                    <ng-template ng-header-tmp>
                        <small class="form-text text-muted">Loaded {{locationsBuffer.length}} of {{locations.length}}</small>
                    </ng-template>  
                </ng-select>
            </div>
            <div fxLayoutAlign="center" *ngIf="selectedClassValue === 'Q12'">
                {{selectedOrgs}}
                {{selectedOrgPlaces}}
            </div> 
        </div>
    
</body>