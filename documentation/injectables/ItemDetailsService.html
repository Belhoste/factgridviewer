<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>factgrid documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">factgrid documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >ItemDetailsService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/services/item-details.service.ts</code>
        </p>





            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#baseWikimediaURL" >baseWikimediaURL</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#factgrid" >factgrid</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#itemInfo" >itemInfo</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#longestLength" >longestLength</a>
                            </li>
                            <li>
                                <a href="#qualifiers2" >qualifiers2</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#setDate" >setDate</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#typology" >typology</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#addClaimItemDetails" >addClaimItemDetails</a>
                            </li>
                            <li>
                                <a href="#addItemInfo" >addItemInfo</a>
                            </li>
                            <li>
                                <a href="#addLongestWordLength" >addLongestWordLength</a>
                            </li>
                            <li>
                                <a href="#addQualifierItemDetails" >addQualifierItemDetails</a>
                            </li>
                            <li>
                                <a href="#addReference2ItemDetails" >addReference2ItemDetails</a>
                            </li>
                            <li>
                                <a href="#addReferenceItemDetails" >addReferenceItemDetails</a>
                            </li>
                            <li>
                                <a href="#addSitelinksDetails" >addSitelinksDetails</a>
                            </li>
                            <li>
                                <a href="#setUrl" >setUrl</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>


            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addClaimItemDetails"></a>
                    <span class="name">
                        <span ><b>addClaimItemDetails</b></span>
                        <a href="#addClaimItemDetails"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>addClaimItemDetails(items, re, itemProperties, lang)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="25"
                                    class="link-to-prism">src/app/services/item-details.service.ts:25</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>items</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>re</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>itemProperties</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>lang</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addItemInfo"></a>
                    <span class="name">
                        <span ><b>addItemInfo</b></span>
                        <a href="#addItemInfo"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>addItemInfo(re)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="289"
                                    class="link-to-prism">src/app/services/item-details.service.ts:289</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>re</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addLongestWordLength"></a>
                    <span class="name">
                        <span ><b>addLongestWordLength</b></span>
                        <a href="#addLongestWordLength"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>addLongestWordLength(re)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="23"
                                    class="link-to-prism">src/app/services/item-details.service.ts:23</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>re</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addQualifierItemDetails"></a>
                    <span class="name">
                        <span ><b>addQualifierItemDetails</b></span>
                        <a href="#addQualifierItemDetails"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>addQualifierItemDetails(items, re, itemProperties, lang)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="88"
                                    class="link-to-prism">src/app/services/item-details.service.ts:88</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Enrichit chaque statement avec qualifiers2 (pour l&#39;affichage).
Pour chaque qualifier, ajoute dans display un objet enrichi (id, label, description, aliases...).
Gère aussi le tri chronologique via timeOrder si un qualifier de type &quot;time&quot; existe.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>items</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>re</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>itemProperties</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>lang</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addReference2ItemDetails"></a>
                    <span class="name">
                        <span ><b>addReference2ItemDetails</b></span>
                        <a href="#addReference2ItemDetails"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>addReference2ItemDetails(items, re, itemProperties)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="229"
                                    class="link-to-prism">src/app/services/item-details.service.ts:229</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>items</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>re</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>itemProperties</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addReferenceItemDetails"></a>
                    <span class="name">
                        <span ><b>addReferenceItemDetails</b></span>
                        <a href="#addReferenceItemDetails"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>addReferenceItemDetails(items, re, itemProperties, lang)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="192"
                                    class="link-to-prism">src/app/services/item-details.service.ts:192</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>items</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>re</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>itemProperties</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>lang</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addSitelinksDetails"></a>
                    <span class="name">
                        <span ><b>addSitelinksDetails</b></span>
                        <a href="#addSitelinksDetails"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>addSitelinksDetails(re)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="267"
                                    class="link-to-prism">src/app/services/item-details.service.ts:267</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>re</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setUrl"></a>
                    <span class="name">
                        <span ><b>setUrl</b></span>
                        <a href="#setUrl"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>setUrl(u, p)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="295"
                                    class="link-to-prism">src/app/services/item-details.service.ts:295</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>u</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>p</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="baseWikimediaURL"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>baseWikimediaURL</b></span>
                        <a href="#baseWikimediaURL"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;http://commons.wikimedia.org/wiki/Special:FilePath/&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="19" class="link-to-prism">src/app/services/item-details.service.ts:19</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="factgrid"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>factgrid</b></span>
                        <a href="#factgrid"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(FactgridSubtitlesService)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="13" class="link-to-prism">src/app/services/item-details.service.ts:13</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="itemInfo"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>itemInfo</b></span>
                        <a href="#itemInfo"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(ItemInfoService)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="15" class="link-to-prism">src/app/services/item-details.service.ts:15</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="longestLength"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>longestLength</b></span>
                        <a href="#longestLength"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(LongestWordService)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="16" class="link-to-prism">src/app/services/item-details.service.ts:16</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="qualifiers2"></a>
                    <span class="name">
                        <span ><b>qualifiers2</b></span>
                        <a href="#qualifiers2"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>any[]</code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="21" class="link-to-prism">src/app/services/item-details.service.ts:21</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setDate"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>setDate</b></span>
                        <a href="#setDate"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(SetTimeService)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="12" class="link-to-prism">src/app/services/item-details.service.ts:12</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="typology"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>typology</b></span>
                        <a href="#typology"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(TypologyService)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="14" class="link-to-prism">src/app/services/item-details.service.ts:14</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable, inject } from &#x27;@angular/core&#x27;;
import { SetTimeService } from &#x27;./set-time.service&#x27;;
import { FactgridSubtitlesService } from &#x27;./factgrid-subtitles.service&#x27;
import { TypologyService } from &#x27;./typology.service&#x27;;
import { ItemInfoService } from &#x27;./item-info.service&#x27;;
import { LongestWordService } from &#x27;./longest-word.service&#x27;

@Injectable({
  providedIn: &#x27;root&#x27;
})
export class ItemDetailsService {
  private setDate &#x3D; inject(SetTimeService);
  private factgrid &#x3D; inject(FactgridSubtitlesService);
  private typology &#x3D; inject(TypologyService);
  private itemInfo &#x3D; inject(ItemInfoService);
  private longestLength &#x3D; inject(LongestWordService);


  private baseWikimediaURL &#x3D; &#x27;http://commons.wikimedia.org/wiki/Special:FilePath/&#x27;;

  qualifiers2: any[];

  addLongestWordLength(re) { re.longestWordLength &#x3D; this.longestLength.findLongestWord(re.label) };

  addClaimItemDetails(items, re, itemProperties, lang) { // add labels, descriptions and aliases to the items in the mainsnaks   
    for (let i &#x3D; 0; i &lt; itemProperties.length; i++) {
      let timeOrder &#x3D; 23000000;
      re.claims[itemProperties[i]].datatype &#x3D; re.claims[itemProperties[i]][0].mainsnak.datatype;
      //     if(re.claims[itemProperties[i]][0].mainsnak.datatype &#x3D;&#x3D;&quot;external-id&quot;){re.claims[itemProperties[i]].external &#x3D;&quot;1&quot;}; // add external &#x3D; &quot;1&quot; if external link property
      for (let j &#x3D; 0; j &lt; re.claims[itemProperties[i]].length; j++) {
        re.claims[itemProperties[i]][j].mainsnak.timeOrder &#x3D; timeOrder;
        if (re.claims[itemProperties[i]][j].mainsnak.datatype &#x3D;&#x3D;&#x3D; &quot;time&quot;) {
          let value &#x3D; re.claims[itemProperties[i]][j].mainsnak.datavalue.value.time;
          value &#x3D; value.substring(0, value.length - 10);
          re.claims[itemProperties[i]][j].mainsnak.datavalue.value.date &#x3D; this.setDate.setDate(value, lang);
        }
        //add typology, that is the nature of the item    
        /*  if(itemProperties[i] &#x3D;&#x3D;&#x3D; &quot;P2&quot;){
            let u &#x3D;&quot;&quot;;
           re.claims[itemProperties[i]][j].typology &#x3D; this.typology.getValue(re.claims[itemProperties[i]][j].mainsnak.datavalue.value.id);
         
          }*/

        if (itemProperties[i] &#x3D;&#x3D;&#x3D; &quot;P189&quot; || itemProperties[i] &#x3D;&#x3D;&#x3D; &quot;P556&quot; || itemProperties[i] &#x3D;&#x3D;&#x3D; &quot;P181&quot; || itemProperties[i] &#x3D;&#x3D;&#x3D; &quot;P1267&quot;) {
          re.claims[itemProperties[i]][j].picture &#x3D; this.baseWikimediaURL + re.claims[itemProperties[i]][j].mainsnak.datavalue.value
        }
        if (itemProperties[i] &#x3D;&#x3D;&#x3D; &quot;P188&quot;) {
          let u &#x3D; re.claims[itemProperties[i]][j].mainsnak.datavalue.value.substring(0, 5);
          if (u !&#x3D;&#x3D; &quot;http:&quot;) {
            re.claims[itemProperties[i]][j].picture &#x3D; re.claims[itemProperties[i]][j].mainsnak.datavalue.value
          }
        }
        if (itemProperties[i] &#x3D;&#x3D;&#x3D; &quot;P320&quot;) {
          re.claims[itemProperties[i]][j].mainsnak.datatype &#x3D; &quot;sparql&quot;;
          //   if(re.claims[itemProperties[i]][j].mainsnak.datavalue.value.includes(&quot;item&quot;)&#x3D;&#x3D;&#x3D;false){ re.claims[itemProperties[i]][j].mainsnak.datavalue.value&#x3D;&quot;undefined&quot;};
        };

        this.factgrid.setSubtitle1(re, itemProperties[i], lang); // to set a subtitle

        if (re.claims[itemProperties[i]][j].mainsnak.datatype !&#x3D;&#x3D; &quot;wikibase-item&quot;) { continue }
        let number: number &#x3D; j;
        this.factgrid.setSubtitle2(re, itemProperties[i], number, lang)
        for (let k &#x3D; 0; k &lt; items.length; k++) {
          if (re.claims[itemProperties[i]][j].mainsnak.datavalue.value.id &#x3D;&#x3D;&#x3D; items[k].id) {
            //     re.claims[itemProperties[i]][j].mainsnak.id &#x3D; items[k].id;
            re.claims[itemProperties[i]][j].mainsnak.label &#x3D; items[k].label;
            if (items[k].description !&#x3D;&#x3D; undefined)
              re.claims[itemProperties[i]][j].mainsnak.description &#x3D; items[k].description;
            items[k].description ? (re.claims[itemProperties[i]][j].mainsnak.separator &#x3D; &quot;, &quot;) : (re.claims[itemProperties[i]][j].mainsnak.separator &#x3D; &quot;&quot;);
            if (items[k].aliases !&#x3D;&#x3D; undefined)
              re.claims[itemProperties[i]][j].mainsnak.aliases &#x3D; items[k].aliases;
          }
        }
      }
    }
    return re
  }

  /**
   * Enrichit chaque statement avec qualifiers2 (pour l&#x27;affichage)
   * et gère le tri chronologique via timeOrder si un qualifier de type &quot;time&quot; existe.
   */
  /**
  * Enrichit chaque statement avec qualifiers2 (pour l&#x27;affichage).
  * Pour chaque qualifier, ajoute dans display un objet enrichi (id, label, description, aliases...).
  * Gère aussi le tri chronologique via timeOrder si un qualifier de type &quot;time&quot; existe.
  */
  addQualifierItemDetails(items, re, itemProperties, lang) {
    for (const prop of itemProperties) {
      if (!re.claims[prop]) continue;
      for (const statement of re.claims[prop]) {
        if (!statement.qualifiers || !statement.qualifiers2) continue;

        // Pour chaque propriété de qualifier
        for (const qualifier2 of statement.qualifiers2) {
          const qualifierProp &#x3D; qualifier2.id;
          const qualifierValues &#x3D; statement.qualifiers[qualifierProp];
          if (!Array.isArray(qualifierValues)) continue;

          // Préparation du display enrichi
          const display &#x3D; [];

          for (const q of qualifierValues) {
            if (!q) continue;
            if (q.datatype &#x3D;&#x3D;&#x3D; &quot;wikibase-item&quot; &amp;&amp; q.datavalue?.value) {
              const val &#x3D; q.datavalue.value;
              const enriched &#x3D; items.find(it &#x3D;&gt; it.id &#x3D;&#x3D;&#x3D; val.id);
              display.push({
                id: val.id,
                label: enriched?.label || val.label || val.id,
                description: enriched?.description || val.description || &quot;&quot;,
                aliases: enriched?.aliases || val.aliases || [],
                datatype: &quot;wikibase-item&quot;
              });
            } else if (q.datatype &#x3D;&#x3D;&#x3D; &quot;commonsMedia&quot; &amp;&amp; q.datavalue?.value) {
              display.push({
                label: q.datavalue.value.label || q.datavalue.value,
                description: q.datavalue.value.description || &quot;&quot;,
                aliases: q.datavalue.value.aliases || [],
                datatype: &quot;commonsMedia&quot;
              });
            } else if (q.datatype &#x3D;&#x3D;&#x3D; &quot;external-id&quot; &amp;&amp; q.datavalue?.value) {
              display.push({
                value: q.datavalue.value,
                datatype: &quot;external-id&quot;
              });
            } else if (q.datatype &#x3D;&#x3D;&#x3D; &quot;time&quot; &amp;&amp; q.datavalue?.value) {
              let value &#x3D; q.datavalue.value.time;
              value &#x3D; value.substring(0, value.length - 10);
              const date &#x3D; this.setDate.setDate(value, lang);
              statement.mainsnak.timeOrder &#x3D; value;
              let era &#x3D; value.charAt(0);
              statement.mainsnak.timeOrder &#x3D; Number(value.replace(/\-/g, &quot;&quot;).replace(/\+/g, &quot;&quot;).substring(0, 8));
              if (era !&#x3D;&#x3D; &quot;+&quot;) {
                statement.mainsnak.timeOrder &#x3D; -Math.abs(statement.mainsnak.timeOrder);
              }
              display.push({
                value,
                date,
                datatype: &quot;time&quot;
              });
            } else if (q.datatype &#x3D;&#x3D;&#x3D; &quot;quantity&quot; &amp;&amp; q.datavalue?.value) {
              // Gestion du type quantity
              display.push({
                amount: q.datavalue.value.amount,
                unit: q.datavalue.value.unit,
                datatype: &quot;quantity&quot;
              });
            } else if (q.datatype &#x3D;&#x3D;&#x3D; &quot;string&quot; &amp;&amp; q.datavalue?.value) {
              display.push({
                value: q.datavalue.value,
                datatype: &quot;string&quot;
              });
            } else if (q.datatype &#x3D;&#x3D;&#x3D; &quot;monolingualtext&quot; &amp;&amp; q.datavalue?.value) {
              display.push({
                value: q.datavalue.value,
                datatype: &quot;monolingualtext&quot;
              });
            } else if (q.datavalue?.value) {
              display.push({
                value: q.datavalue.value,
                datatype: q.datatype || &quot;unknown&quot;
              });
            }
          }

          // Ajoute le display enrichi à l&#x27;objet de qualifiers2
          qualifier2.display &#x3D; display;
        }

        // Si la propriété est &quot;P2&quot;, on force timeOrder à &quot;0&quot;
        if (prop &#x3D;&#x3D;&#x3D; &quot;P2&quot;) {
          statement.mainsnak.timeOrder &#x3D; &quot;0&quot;;
        }
      }

      // Tri chronologique des statements si un timeOrder a été trouvé
      if (re.claims[prop].length &gt; 1 &amp;&amp; re.claims[prop][0].mainsnak.timeOrder !&#x3D;&#x3D; undefined) {
        re.claims[prop].sort((a, b) &#x3D;&gt; {
          if (a.mainsnak.timeOrder &lt; b.mainsnak.timeOrder) return -1;
          if (a.mainsnak.timeOrder &gt; b.mainsnak.timeOrder) return 1;
          return 0;
        });
      }
    }
    return re;
  }




  addReferenceItemDetails(items, re, itemProperties, lang) {  //add labels, definitions and aliases of items in the references
    for (let i &#x3D; 0; i &lt; itemProperties.length; i++) {
      for (let j &#x3D; 0; j &lt; re.claims[itemProperties[i]].length; j++) {
        if (re.claims[itemProperties[i]][j].references &#x3D;&#x3D;&#x3D; undefined) { continue }
        for (let k &#x3D; 0; k &lt; re.claims[itemProperties[i]][j].references.length; k++) {
          let props &#x3D; Object.keys(re.claims[itemProperties[i]][j].references[k].snaks);
          for (let l &#x3D; 0; l &lt; items.length; l++) {
            for (let a &#x3D; 0; a &lt; props.length; a++) {
              for (let b &#x3D; 0; b &lt; re.claims[itemProperties[i]][j].references[k].snaks[props[a]].length; b++) {
                if (re.claims[itemProperties[i]][j].references[k].snaks[props[a]][b].datatype &#x3D;&#x3D;&#x3D; &quot;time&quot;) {
                  let value &#x3D; re.claims[itemProperties[i]][j].references[k].snaks[props[a]][b].datavalue.value.time;
                  value &#x3D; value.substring(0, value.length - 10);
                  re.claims[itemProperties[i]][j].references[k].snaks[props[a]][b].datavalue.value.date &#x3D; this.setDate.setDate(value, lang);
                }
                if (re.claims[itemProperties[i]][j].references[k].snaks[props[a]][b].datatype &#x3D;&#x3D;&#x3D; &quot;external-id&quot;) {
                  this.setUrl(re.claims[itemProperties[i]][j].references[k].snaks[props[a]][b], props[a]);
                }
                if (re.claims[itemProperties[i]][j].references[k].snaks[props[a]][b].datatype !&#x3D;&#x3D; &quot;wikibase-item&quot;) { continue }
                if (re.claims[itemProperties[i]][j].references[k].snaks[props[a]][b].datavalue.value.id &#x3D;&#x3D;&#x3D; items[l].id) {
                  if (re.claims[itemProperties[i]][j].references[k].snaks[props[a]][b] !&#x3D;&#x3D; undefined) {
                    re.claims[itemProperties[i]][j].references[k].snaks[props[a]][b].datavalue.value.label &#x3D; items[l].label;
                    if (items[l].description !&#x3D;&#x3D; undefined)
                      re.claims[itemProperties[i]][j].references[k].snaks[props[a]][b].datavalue.value.description &#x3D; items[l].description;
                    items[l].description ? re.claims[itemProperties[i]][j].references[k].snaks[props[a]][b].datavalue.value.separator &#x3D; &quot;, &quot; : re.claims[itemProperties[i]][j].references[k].snaks[props[a]][b].datavalue.value.separator &#x3D; &quot;&quot;;
                    if (items[l].aliases !&#x3D;&#x3D; undefined)
                      re.claims[itemProperties[i]][j].references[k].snaks[props[a]][b].datavalue.value.aliases &#x3D; items[l].aliases;
                  }
                }
              }
            }
          }
        }
      }
    }
    return re
  }

  addReference2ItemDetails(items, re, itemProperties) { //add the items of the qualifiers to the array qualifiers     

    for (let i &#x3D; 0; i &lt; itemProperties.length; i++) {
      for (let j &#x3D; 0; j &lt; re.claims[itemProperties[i]].length; j++) {
        if (re.claims[itemProperties[i]][j].references2 &#x3D;&#x3D;&#x3D; undefined) { continue }
        for (let k &#x3D; 0; k &lt; re.claims[itemProperties[i]][j].references2.length; k++) {
          for (let l &#x3D; 0; l &lt; re.claims[itemProperties[i]][j].references.length; l++) {
            let props &#x3D; Object.keys(re.claims[itemProperties[i]][j].references[l].snaks);
            let referencesArray &#x3D; Object.values(re.claims[itemProperties[i]][j].references[l].snaks);
            for (let m &#x3D; 0; m &lt; props.length; m++) {
              if (re.claims[itemProperties[i]][j].references2[k][m] &#x3D;&#x3D;&#x3D; undefined) { continue };
              let display &#x3D; []
              for (let n &#x3D; 0; n &lt; re.claims[itemProperties[i]][j].references[l].snaks[props[m]].length; n++) {
                if (re.claims[itemProperties[i]][j].references2[k][m].id &#x3D;&#x3D;&#x3D; props[m]) {
                  if (re.claims[itemProperties[i]][j].references[l].snaks[props[m]][n].datavalue.value) {
                    if (re.claims[itemProperties[i]][j].references[l].snaks[props[m]][n].datatype &#x3D;&#x3D;&#x3D; &quot;external-id&quot;) {
                      display.push(re.claims[itemProperties[i]][j].references[l].snaks[props[m]][n].datavalue)
                    }
                    else if (re.claims[itemProperties[i]][j].references[l].snaks[props[m]][n].datatype &#x3D;&#x3D;&#x3D; &quot;time&quot;) {
                      display.push(re.claims[itemProperties[i]][j].references[l].snaks[props[m]][n].datavalue.value.date)
                    }
                    else { display.push(re.claims[itemProperties[i]][j].references[l].snaks[props[m]][n].datavalue.value) }
                  }
                  re.claims[itemProperties[i]][j].references2[k][m].display &#x3D; display
                }
              }
            }
          }
        }
      }
    }
    // console.log(re);
    return re
  }




  addSitelinksDetails(re) {
    if (re.sitelinks.commonswiki !&#x3D;&#x3D; undefined) {
      let url &#x3D; re.sitelinks.commonswiki.title.replace(&quot; &quot;, &quot;_&quot;);
      re.sitelinks.commonswiki.url &#x3D; &quot;https://commons.wikimedia.org/wiki/&quot; + url
    }
    if (re.sitelinks.enwiki !&#x3D;&#x3D; undefined) {
      let url &#x3D; re.sitelinks.enwiki.title.replace(&quot; &quot;, &quot;_&quot;);
      re.sitelinks.enwiki.url &#x3D; &quot;https://en.wikipedia.org/wiki/&quot; + url
    }
    if (re.sitelinks.dewiki !&#x3D;&#x3D; undefined) {
      let url &#x3D; re.sitelinks.dewiki.title.replace(&quot; &quot;, &quot;_&quot;);
      re.sitelinks.dewiki.url &#x3D; &quot;https://de.wikipedia.org/wiki/&quot; + url
    }
    if (re.sitelinks.frwiki !&#x3D;&#x3D; undefined) {
      let url &#x3D; re.sitelinks.frwiki.title.replace(&quot; &quot;, &quot;_&quot;);
      re.sitelinks.frwiki.url &#x3D; &quot;https://fr.wikipedia.org/wiki/&quot; + url
    }
    if (re.sitelinks.wikidatawiki !&#x3D;&#x3D; undefined) {
      re.sitelinks.wikidatawiki.url &#x3D; &quot;https://www.wikidata.org/wiki/&quot; + re.sitelinks.wikidatawiki.title
    }
  }

  addItemInfo(re) {

    // re.info &#x3D; this.itemInfo.infoListBuilding(re)

  }

  setUrl(u, p) {

    if (u.externalLink !&#x3D;&#x3D; undefined) {

      u.datavalue.link &#x3D; u.externalLink.replace(&quot;$1&quot;, u.datavalue.value);
    }

    if (p &#x3D;&#x3D;&#x3D; &quot;P76&quot;) { // id GND
      u.datavalue.link &#x3D; &quot;https://explore.gnd.network/gnd/&quot; + u.datavalue.value;
    };
    if (p &#x3D;&#x3D;&#x3D; &quot;P368&quot;) { // id VD16 +
      u.datavalue.link &#x3D; &#x27;http://gateway-bayern.de/VD16+&#x27; + u.datavalue.value;
    };
    if (p &#x3D;&#x3D;&#x3D; &quot;P369&quot;) { //id VD17
      u.datavalue.link &#x3D; &#x27;https://kxp.k10plus.de/DB&#x3D;1.28/CMD?ACT&#x3D;SRCHA&amp;IKT&#x3D;8079&amp;TRM&#x3D;%27:&#x27;
        + u.datavalue.value + &quot;%27&quot;;
    };
    if (p &#x3D;&#x3D;&#x3D; &quot;P370&quot;) {//id VD18
      u.datavalue.link &#x3D; &#x27;https://kxp.k10plus.de/DB&#x3D;1.65/CMD?ACT&#x3D;SRCHA&amp;IKT&#x3D;8080&amp;TRM&#x3D;VD18&#x27; + u.datavalue.value
    };
    if (p &#x3D;&#x3D;&#x3D; &quot;P650&quot;) { // INE ID (Spain)
      let province &#x3D; u.datavalue.value.slice(0, 2);
      let municipality &#x3D; u.datavalue.value.slice(2, 5);
      let parish &#x3D; u.datavalue.value.slice(5, 7);
      let es &#x3D; u.datavalue.value.slice(7, 9);
      u.datavalue.link &#x3D; u.externalLink.replace(&quot;$1&quot;, province);
      u.datavalue.link &#x3D; u.datavalue.link.replace(&quot;$2&quot;, municipality);
      u.datavalue.link &#x3D; u.datavalue.link.replace(&quot;$3&quot;, parish);
      u.datavalue.link &#x3D; u.datavalue.link.replace(&quot;$4&quot;, es);
      u.datavalue.link &#x3D; u.datavalue.link.replace(&quot;$5&quot;, &quot;00&quot;);
    };
    if (p &#x3D;&#x3D;&#x3D; &quot;P882&quot;) { // Deusches Rechtswörterbuch
      u.datavalue.link &#x3D; &#x27;https://drw-www.adw.uni-heidelberg.de/drw-cgi/zeige?index&#x3D;lemmata&amp;term&#x3D;&#x27; + u.datavalue.value + &#x27;&amp;darstellung&#x3D;V&#x27;;
    };
  }


}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'ItemDetailsService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
