import{a as se}from"./chunk-XC5BFIMB.js";import{k as Z}from"./chunk-4S23CEPG.js";import{Aa as d,C as b,Cd as K,Dd as X,Ec as H,F as y,Fa as f,Fc as J,Ga as L,Gc as W,Ha as I,I as F,Ia as A,Ja as n,Ka as a,La as p,Lb as V,M as m,Nb as q,P as M,Pa as D,Rb as U,Rd as Y,Sa as k,Ua as u,Ub as z,Vd as ee,W as P,Wb as G,Wd as te,X as T,Xd as ie,Yd as ne,Zd as ae,_d as re,ae as oe,bc as N,be as le,cc as Q,ce,db as o,eb as O,fb as _,h as w,j as g,ka as E,la as r,mb as R,nb as B,ob as j,p as h,v as x,va as v,w as S,xb as $}from"./chunk-MYJQFCEC.js";var me=(()=>{class t{constructor(){this.seed=["jaw","jar","toy","troy","hip","hop"],this.data$=new g(this.seed),this.data=this.data$.asObservable()}addData(e){let i=this.data$.getValue().concat(e);this.data$.next(i)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function pe(t,s){return this.trackById(s)}var ue=()=>[""],he=t=>["/item",t];function fe(t,s){if(t&1&&(n(0,"span"),o(1),a()),t&2){let e=u().$implicit;r(),_(", ",e.description,"")}}function ge(t,s){if(t&1){let e=D();n(0,"div")(1,"span",9),o(2),a(),n(3,"mat-icon-button",10),k("click",function(){let l=P(e).$implicit,c=u(2);return T(c.openItem(l))}),n(4,"mat-icon",11),o(5,"open_in_new"),a()(),o(6," \xA0\xA0\xA0 "),v(7,fe,2,1,"span"),p(8,"hr"),a()}if(t&2){let e=s.$implicit;r(2),_("",e.label,"\xA0"),r(2),d("inline",!0),r(3),f(e.description?7:-1)}}function ve(t,s){if(t&1&&(n(0,"div",7)(1,"div",8),I(2,ge,9,3,"div",null,L),a()()),t&2){let e=u();r(2),A(e.items)}}function _e(t,s){if(t&1&&(n(0,"span",19),o(1),n(2,"mat-icon-button",20)(3,"mat-icon",21),o(4,"open_in_new"),a()(),o(5,"\xA0\xA0\xA0\xA0\xA0 "),a()),t&2){let e=u().$implicit;r(),_(" ",e.label,"\xA0 "),r(),d("routerLink",j(3,he,e.value.id)),r(),d("inline",!0)}}function Ce(t,s){if(t&1&&(n(0,"div",18),v(1,_e,6,5,"span",19),p(2,"br"),a()),t&2){let e=s.$implicit;r(),f(e?1:-1)}}function xe(t,s){if(t&1&&(n(0,"div")(1,"div",6)(2,"a",12),o(3," sparql query "),a(),n(4,"span"),o(5,"\xA0\xA0|\xA0\xA0"),a(),n(6,"a",13),o(7,"FactGrid"),a()(),n(8,"div",14)(9,"mat-card",15)(10,"div",16),o(11),a(),n(12,"div",17),p(13,"hr"),n(14,"mat-card-content")(15,"div"),I(16,Ce,3,1,"div",18,pe,!0),a()()()()()()),t&2){let e=u();r(6),d("routerLink",B(2,ue)),r(5),O(e.formerVisitsTitle),r(5),A(e.selectedParisItemsList)}}var He=(()=>{class t{constructor(){this.dataService=m(me),this.changeDetector=m($),this.request=m(le),this.setLanguage=m(se),this.lang=m(ce),this.router=m(H),this.searchInput=new z,this.isDisplay=!1,this.data$=new w,this.searchQuery$=new g(""),this.items=[],this.baseGetURL="https://database.factgrid.de//w/api.php?action=wbgetentities&ids=",this.getUrlSuffix="&format=json&origin=*",this.formerVisitsTitle="you have visited:",this.selectedParisItemsList=(JSON.parse(localStorage.getItem("selectedItems"))||[]).filter(e=>e&&e.value&&e.value.id)}openItem(e){console.log("openItem called with:",e),sessionStorage.setItem("from","paris-search"),this.router.navigate(["/item",e.id],{state:{from:"paris-search"}})}ngOnInit(){this.formerVisitsTitle=this.lang.formerVisitsTitle(),console.log("selectedParisItemsList:",this.selectedParisItemsList),this.labels=this.searchInput.valueChanges.pipe(S(400),h(e=>"Paris, "+e),y(e=>console.log(e)),b(e=>this.request.searchItem(e,this.lang.selectedLang)),h(e=>this.createList(e)),h(e=>e=="https://database.factgrid.de//w/api.php?action=wbgetentities&ids=&format=json&origin=*"?"https://database.factgrid.de//w/api.php?action=wbgetentities&ids=Q220375&format=json&origin=*":e),S(200),b(e=>this.request.getItem(e)),x(e=>e!==void 0),x(e=>e.entities!==void 0&&e.entities!==null),h(e=>Object.values(e.entities))).subscribe(e=>{this.items=this.setLanguage.item(e,this.lang.selectedLang),this.isDisplay=!0,this.items[0].id=="Q220375"&&(this.isDisplay=!1),this.changeDetector.detectChanges()})}createList(e){let i="",l="",c=e.search;c===void 0?c=[]:c=c;for(let C=0;C<c.length;C++)i=i+"|"+c[C].id;return i=i.slice(1),l=this.baseGetURL+i+this.getUrlSuffix,l}addParis(e){e="Paris, "+e}trackById(e,i){return i&&i.value?i.value.id:e}ngOnDestroy(){this.labels.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=M({type:t,selectors:[["app-paris-search"]],standalone:!0,features:[R],decls:14,vars:3,consts:[["href",E`https://fonts.googleapis.com/icon?family=Material+Icons`,"rel","stylesheet"],[1,"cardBackground"],[1,"bigTitle"],["appearance","outlined",1,"mat-elevation-z12"],[1,"search-center2"],["matInput","","placeholder","Ex. rue de la Paix","value","rue de la Paix",3,"formControl"],[1,"search-center"],[1,"searchListSize"],[1,"details"],[1,"search-label"],[1,"internalLink",3,"click"],["color","primary",3,"inline"],["href","https://database.factgrid.de/query/#%23model%0A%0ASELECT%20%3Fitem%20%3Fviewer%20%3FitemLabel%20%20WHERE%20%7B%0A%20%20SERVICE%20wikibase%3Alabel%20%7B%20bd%3AserviceParam%20wikibase%3Alanguage%20%22%5BAUTO_LANGUAGE%5D%2Cen%22.%20%7D%0A%20%20%3Fitem%20wdt%3AP2%20wd%3AQ7%3B%0A%20%20%20%20%20%20%20%20wdt%3AP247%20wd%3AQ24708.%0A%20%20BIND%28STRAFTER%28STR%28%3Fitem%29%2C%20STR%28wd%3A%29%29%20AS%20%3FitemId%29%0A%20%20BIND%28IRI%28CONCAT%28%22https%3A%2F%2Fdatabase.factgrid.de%2Fviewer%2Fitem%2F%22%2C%20%3FitemId%29%29%20AS%20%3Fviewer%29%0A%7D%0A"],[3,"routerLink"],[1,"search-itemSelected"],["appearance","outlined",1,"search-itemSelected-mat-card"],[1,"selectedListTitle2"],[1,"selectedItemSize"],[1,"labelTitlePadding"],[1,"selectedItemText"],[1,"internalLink",3,"routerLink"],[1,"whiteButton",3,"inline"]],template:function(i,l){i&1&&(n(0,"head"),p(1,"link",0),a(),n(2,"body")(3,"div",1)(4,"div",2),o(5,"Paris on FactGrid"),a()(),n(6,"mat-card",3)(7,"mat-card-content")(8,"div",4)(9,"mat-form-field"),p(10,"input",5),a()()(),n(11,"div",6),v(12,ve,4,0,"div",7)(13,xe,18,3,"div"),a()()()),i&2&&(r(10),d("formControl",l.searchInput),r(2),f(l.isDisplay==!0?12:-1),r(),f(l.isDisplay==!1?13:-1))},dependencies:[V,W,J,Q,q,U,G,N,ne,ie,ee,te,Z,X,K,Y,oe,ae,re],styles:[".example-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:300px}.example-header[_ngcontent-%COMP%]{min-height:64px;padding:8px 24px 0}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.mat-table[_ngcontent-%COMP%]{overflow:auto;max-height:500px}.search-center[_ngcontent-%COMP%]{display:flex;justify-content:center}.search-center2[_ngcontent-%COMP%]{margin-top:40px;display:flex;justify-content:center}.search-label[_ngcontent-%COMP%]{font-weight:700}.search-itemSelected[_ngcontent-%COMP%]{margin-top:50px}.selectedItemSize[_ngcontent-%COMP%]{font-size:14px}"]})}}return t})();export{He as ParisSearchComponent};
